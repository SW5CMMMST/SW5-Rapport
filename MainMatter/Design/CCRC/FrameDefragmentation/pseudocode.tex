\section{Additions to the Pseudocode}
As in the changes to the flowchart, there will also be changes to the pseudocode. 

There are changes to \texttt{mainLoop} and \texttt{protocolMaintenance}, additions are marked in green and deletions marked with red.

\begin{lstlisting}[style=pseudocode,mathescape=true,float, label={lst:general_case2}, caption={Modifications to the previous pseudocode are highlighted in green.}, escapechar=\%] 
procedure mainLoop()
	loop forever
		run userCode() until $x \geq \delta_{proc}$
		$i \leftarrow (i \text{ mod } n) + 1$ // Update current slot
		if $i = k$ then
%\HilightGreen%			if $k = 1$ then
%\HilightGreen%				shrinkNetwork()
%\HilightGreen%			end
			makePayload() // Updates the data to be sendt
			transmit($i$, $n$, $id$, $data$)
%\HilightGreen%			if $k = n - 1$ then
%\HilightGreen%				jumpPosition()
%\HilightGreen%			end
		else
%\HilightGreen%			timeout $\leftarrow$ true
			while $x \leq \delta$ do
				if received($i'$, $n'$, $id'$, $data'$) then
					protocolMaintance($i'$, $n'$, $|data'|$)
					userRecieve($id'$, $data'$)
%\HilightGreen%					timeout $\leftarrow$ false
				end
			end
%\HilightGreen%			handleTimeout(timeout, i, k, n)
		end
		wait until $x \geq \delta$
		$x \leftarrow 0$ 
	end
\end{lstlisting} 

\begin{algorithm}[h]
\caption{Procedure which shrinks the network if needed.}
\label{lst:general_case5}
\begin{algorithmic}[1]
\Procedure {ShrinkNetwork}{ }
    \If {$[n-1] \ge m_{max}$}
        \CState \textit{counter}$[n-1] \gets 0$
        \CState $n \gets n - 1$
    \EndIf
\EndProcedure
\end{algorithmic}    
\end{algorithm} 

\begin{algorithm}[h]
\caption{If any counter is over its limit, then move to its position in the next frame and reduce the size of the network.}
\label{lst:general_case4}
\begin{algorithmic}[1]
\Procedure {JumpPosition}{ }
    \For {\textbf{all} \emph{counter}$[i]$ \textbf{in} \emph{counter}$[ ]$}
        \If {any \emph{counter}$[i] \ge m_{max}$}
            \State $k \gets i$
            \State \textbf{return}
        \EndIf
    \EndFor 
\EndProcedure
\end{algorithmic}    
\end{algorithm} 

\begin{algorithm}[h]
\caption{This code handles counting how many times a given device has timed out.}
\label{lst:general_case3}
\begin{algorithmic}[1]
\Procedure {HandleTimeout}{\textit{timeout, }$i, k, n$}
    \If {\textit{timeout}}
        \If {$k = 1$ and $i = n - 1$}
            \State \textit{counter}$[n - 1] \gets$ \textit{counter}$[n - 1] + 1$
        \ElsIf {$k = n - 1$}
            \State \textit{counter}$[i] \gets$ \textit{counter}$[i] + 1$
        \EndIf
    \Else
        \If {$k = 1$ and $i = n - 1$}
            \State \textit{counter}$[n - 1] \gets 0$
        \ElsIf {$k = n - 1$}
            \State \textit{counter}$[i] \gets 0$
        \EndIf
    \EndIf
\EndProcedure
\end{algorithmic}    
\end{algorithm}

\begin{algorithm}[h]
\caption{Additions to protocol maintenance.}
\label{lst:maintaniance1}
\begin{algorithmic}[1]
\Procedure {ProtocolMaintenance}{$n', i', |data'|$}
    \If {$n' \neq n$}
        \If {$k = 1$ or $k = n - 1$}
            \For{$i$ \textbf{in} $[1, n]$}
                \State \textit{counter}$[i] \gets n$
            \EndFor
        \EndIf
    \EndIf
\Statex \texttt{[\ldots]}
\EndProcedure
\end{algorithmic}    
\end{algorithm}
 