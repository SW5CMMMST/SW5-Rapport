A significant issue for long-lived TDMA networks such as the one constructed before is fragmentation caused by removal of one or more devices. 
The term fragmentation refers to unused parts as one or more parts of a sequential resource. 
In relation to TDMA it is an unused time-slot in the frame. 
Currently in the design if a device leaves and joins again, it will get a new time-slot in the frame, and the old time-slot will remain unused, thus causing the frame to be longer and therefore slowing the network.
Additionally there is no way of informing other devices of a devices' impeding removal, e.g. power off. 
This is the explicit removal problem (ERP). 
If a device is unable to transmit for any other reason, i.e. power-off, transmission module failure, etc. it is unable to inform the other devices of this ahead of time. 
This is the implicit removal problem (IRP). 

A solution to this problem should ideally handle both of these sub-problems, however a solution to the IRP will also solve the ERP.
Therefore it is sufficient to solve IRP, and therefore the rest of this chapter will only focus on the IRP.  

The design in this chapter inherits the assumptions of the CCRC-problem. 

\section{Automatic Removal of Inactive Devices}
This design moves devices to the previous slot if it is empty. 
The proposed design has a special case for the first device in the frame, and a general case for the rest of the devices.

\paragraph{General case}
The general case applies to any device which is part of a network and not the first device in the frame, i.e. $k \neq 1$.
If the device does not receive any payload from the device before it (i.e. device $k - 1$) a given number of times, called $m_{max}$, in a row, then it should transmit in its time-slot instead of its own from this frame on onward. 
This will create another missing slot to be handled by another device, unless the device was in time-slot $n - 1$, i.e. the last time-slot of the frame. 

\paragraph{Special case}
The special case applies to the first device of the frame, i.e. $k = 1$. 
Since there is no device in the same frame before the first device, whose time-slot it can move to, it should instead reduce the number of time-slots in the frame by one, if it does not receive any payload from the last device of the frame, i.e. $k = n - 1$, a given number of times, called $m_{max}$. 

\bigskip

This is a simple solution, which defragments the frame one device at the time, the worst case scenario is that the first device of the frame is unable to transmit, then the second will take its spot, and so on until the new first device reduces the amount of time-slots in the frame by one. 
This worst case will take at most take $n * m_{max}$ frames to remove the first device, assuming it is the only change to the network in the meantime. 
Under the assumptions of the CCRC-problem, no transmissions should be missed, and therefore $m_{max}$ can be set to $1$. 
The device reducing the time-slots in the frame by one will not cause new devices not to be able to join the network, as the free time-slot will simply be placed in the previous time-slot. 

\section{Automatic Insertion in Unused Time-slots}
Another solution is for new devices to insert themselves in unused time-slot of an existing network.

\paragraph{Addition to start-up}
This would change the start-up procedure to require new devices, which discovers a network, to listen for at-least one whole frame, then insert themselves in an unoccupied time-slot, and if non is found then the empty slot. 

\bigskip

This will in some cases reduce or even remove fragmentation from a network. 
For example the case in which a device restarts unexpectedly, then it would retake its old time-slot, assuming no other parts of the network changed in the downtime.
It is a relatively simple change to the existing protocol, and would therefore be easy to implement.  
However this would not be a solution for network which decrease in size, and would leave them with empty time-slots until a new device joins the network. 